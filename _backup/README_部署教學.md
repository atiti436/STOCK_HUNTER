# ğŸš€ å°è‚¡æƒ…å ±çµäºº v2.0 - Zeabur éƒ¨ç½²æ•™å­¸

## ğŸ“‹ éƒ¨ç½²å‰æº–å‚™

### 1. ç”³è«‹ LINE BOT

1. å‰å¾€ [LINE Developers](https://developers.line.biz/console/)
2. ç™»å…¥å¾Œå»ºç«‹ Provider
3. å»ºç«‹ Messaging API Channel
4. å–å¾—ä»¥ä¸‹è³‡è¨Šï¼š
   - **Channel Access Token**ï¼ˆé•·æœŸï¼‰
   - **Channel Secret**
   - **ä½ çš„ USER ID**ï¼ˆç¨å¾Œå–å¾—ï¼‰

**å¦‚ä½•å–å¾— USER IDï¼š**
```
æ–¹æ³• 1ï¼šåŠ  LINE BOT å¥½å‹å¾Œï¼Œåœ¨ç¨‹å¼ç¢¼ä¸­åŠ å…¥ï¼š
@handler.add(MessageEvent, message=TextMessage)
def handle_message(event):
    print(f"USER ID: {event.source.user_id}")  # å°å‡ºä¾†

æ–¹æ³• 2ï¼šä½¿ç”¨ LINE å®˜æ–¹å·¥å…·
https://developers.line.biz/console/
â†’ é€²å…¥ä½ çš„ Channel
â†’ Messaging API
â†’ æ‰¾åˆ°ã€ŒYour user IDã€
```

### 2. ç”³è«‹ Gemini API Key

1. å‰å¾€ [Google AI Studio](https://makersuite.google.com/app/apikey)
2. ç™»å…¥ Google å¸³è™Ÿ
3. é»ã€ŒCreate API Keyã€
4. è¤‡è£½ API Key

### 3. è¨­å®š Webhook

åœ¨ LINE Developers Consoleï¼š
1. é€²å…¥ä½ çš„ Channel
2. æ‰¾åˆ°ã€ŒMessaging APIã€é ç±¤
3. **å…ˆä¸è¨­å®š Webhook URL**ï¼ˆéƒ¨ç½²å¾Œå†è¨­å®šï¼‰
4. **é—œé–‰ã€ŒAuto-reply messagesã€**
5. **é—œé–‰ã€ŒGreeting messagesã€**

---

## ğŸŒ éƒ¨ç½²åˆ° Zeabur

### æ­¥é©Ÿ 1ï¼šè¨»å†Š Zeabur

1. å‰å¾€ [Zeabur](https://zeabur.com/)
2. ä½¿ç”¨ GitHub å¸³è™Ÿç™»å…¥

### æ­¥é©Ÿ 2ï¼šä¸Šå‚³ç¨‹å¼ç¢¼åˆ° GitHub

```bash
# 1. åˆå§‹åŒ– Gitï¼ˆå¦‚æœé‚„æ²’æœ‰ï¼‰
cd D:\claude-project\STOCK_HUNTER
git init

# 2. æ–°å¢æª”æ¡ˆ
git add stock_hunter_v2.py
git add requirements_v2.txt
git add zeabur.json

# 3. æäº¤
git commit -m "Initial commit - Stock Hunter v2.0"

# 4. æ¨é€åˆ° GitHubï¼ˆéœ€å…ˆå»ºç«‹ Repositoryï¼‰
# å‰å¾€ https://github.com/new å»ºç«‹ä¸€å€‹æ–°çš„ Repository
# å‡è¨­åç¨±ç‚º stock-hunter

git remote add origin https://github.com/ä½ çš„å¸³è™Ÿ/stock-hunter.git
git branch -M main
git push -u origin main
```

### æ­¥é©Ÿ 3ï¼šåœ¨ Zeabur å»ºç«‹å°ˆæ¡ˆ

1. ç™»å…¥ Zeabur
2. é»ã€ŒNew Projectã€
3. é¸æ“‡ã€ŒDeploy from GitHubã€
4. æˆæ¬Š Zeabur å­˜å–ä½ çš„ GitHub
5. é¸æ“‡å‰›æ‰å»ºç«‹çš„ Repositoryï¼ˆstock-hunterï¼‰
6. Zeabur æœƒè‡ªå‹•åµæ¸¬ Python å°ˆæ¡ˆ

### æ­¥é©Ÿ 4ï¼šè¨­å®šç’°å¢ƒè®Šæ•¸

åœ¨ Zeabur å°ˆæ¡ˆé é¢ï¼š

1. é»ã€ŒVariablesã€
2. æ–°å¢ä»¥ä¸‹ç’°å¢ƒè®Šæ•¸ï¼š

| Key | Value | èªªæ˜ |
|-----|-------|------|
| `LINE_CHANNEL_ACCESS_TOKEN` | ä½ çš„ Access Token | LINE BOT é‡‘é‘° |
| `LINE_CHANNEL_SECRET` | ä½ çš„ Secret | LINE BOT å¯†é‘° |
| `GEMINI_API_KEY` | ä½ çš„ Gemini Key | Google AI Key |
| `LINE_USER_ID` | ä½ çš„ USER ID | æ¥æ”¶æ¨é€çš„ LINE ID |

### æ­¥é©Ÿ 5ï¼šéƒ¨ç½²

1. é»ã€ŒDeployã€
2. ç­‰å¾… 2-3 åˆ†é˜ï¼ˆZeabur æœƒè‡ªå‹•å®‰è£å¥—ä»¶ï¼‰
3. éƒ¨ç½²æˆåŠŸå¾Œæœƒé¡¯ç¤ºã€ŒRunningã€
4. è¤‡è£½ Zeabur çµ¦ä½ çš„ç¶²å€ï¼ˆä¾‹å¦‚ï¼š`https://stock-hunter-abc123.zeabur.app`ï¼‰

### æ­¥é©Ÿ 6ï¼šè¨­å®š LINE Webhook

å›åˆ° LINE Developers Consoleï¼š

1. é€²å…¥ä½ çš„ Channel
2. æ‰¾åˆ°ã€ŒMessaging APIã€é ç±¤
3. è¨­å®š Webhook URLï¼š
   ```
   https://ä½ çš„zeaburç¶²å€.zeabur.app/callback
   ```
   ä¾‹å¦‚ï¼š`https://stock-hunter-abc123.zeabur.app/callback`
4. é»ã€ŒVerifyã€æ¸¬è©¦é€£ç·š
5. å•Ÿç”¨ã€ŒUse webhookã€

---

## ğŸ§ª æ¸¬è©¦

### 1. æ‰‹å‹•è§¸ç™¼åˆ†æ

ç€è¦½å™¨è¨ªå•ï¼š
```
https://ä½ çš„zeaburç¶²å€.zeabur.app/manual_run
```

æ‡‰è©²æœƒçœ‹åˆ°ï¼š
```
åˆ†æå®Œæˆï¼è«‹æŸ¥çœ‹ LINE
```

ç„¶å¾Œä½ çš„ LINE æ‡‰è©²æœƒæ”¶åˆ°æ¨é€è¨Šæ¯ã€‚

### 2. å°è©±æ¸¬è©¦

åŠ  LINE BOT å¥½å‹å¾Œï¼Œè¼¸å…¥ï¼š
```
ä»Šæ—¥åˆ†æ
```

BOT æ‡‰è©²æœƒç«‹å³æƒæå…¨å°è‚¡ä¸¦å›è¦†æ¨è–¦æ¸…å–®ã€‚

### 3. æª¢æŸ¥å®šæ™‚æ¨é€

ç­‰åˆ°æ˜å¤©æ—©ä¸Š 8:00ï¼Œæ‡‰è©²æœƒè‡ªå‹•æ”¶åˆ°æ¨é€ã€‚

---

## ğŸ“Š æ¨é€è¨Šæ¯ç¯„ä¾‹

```
ğŸ“Š å°è‚¡æƒ…å ±çµäºº 2025-12-02
==============================

ğŸŒ å¸‚å ´ç‹€æ…‹ï¼šğŸŸ¢ SAFE
å¤§ç›¤ï¼š17,500 é»
å­£ç·šï¼š17,200 é»
åŸå› ï¼šå¸‚å ´æ­£å¸¸

ğŸ”¥ æ¨è–¦è²·å…¥ï¼ˆ3æ”¯ï¼‰
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

[2330 å°ç©é›»] $580
â€¢ å¤–è³‡é€£5æ—¥è²·è¶…
â€¢ æŠ•ä¿¡é€£4æ—¥è²·è¶…
â€¢ æ–°èï¼šé»ƒä»å‹³è®šå°ç©é›»ã€3å¥ˆç±³è‰¯ç‡æå‡
â€¢ è©•åˆ†ï¼š5/5 â­â­â­â­â­
â€¢ å»ºè­°å€‰ä½ï¼š15%
â€¢ åœæï¼š$533 (-8%)
â€¢ åœåˆ©ï¼š$754 (+30%)

[2454 è¯ç™¼ç§‘] $1020
â€¢ å¤–è³‡é€£3æ—¥è²·è¶…
â€¢ æ–°èï¼šAIæ™¶ç‰‡è¨‚å–®å¼·å‹
â€¢ è©•åˆ†ï¼š4/5 â­â­â­â­
â€¢ å»ºè­°å€‰ä½ï¼š15%
â€¢ åœæï¼š$938 (-8%)
â€¢ åœåˆ©ï¼š$1326 (+30%)

ğŸ» æ¨è–¦åšç©ºï¼ˆ1æ”¯ï¼‰
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

[2603 é•·æ¦®] $150
â€¢ å¤–è³‡æŠ•ä¿¡é›™è³£è¶…
â€¢ è©•åˆ†ï¼š-3/5

==============================
â° 08:00
```

---

## ğŸ”§ é€²éšè¨­å®š

### ä¿®æ”¹æ¨é€æ™‚é–“

ç·¨è¼¯ `stock_hunter_v2.py`ï¼Œæ‰¾åˆ°ï¼š

```python
scheduler.add_job(daily_analysis_task, 'cron', hour=8, minute=0)
```

æ”¹æˆä½ æƒ³è¦çš„æ™‚é–“ï¼ˆä¾‹å¦‚ 7:30ï¼‰ï¼š

```python
scheduler.add_job(daily_analysis_task, 'cron', hour=7, minute=30)
```

### ä¿®æ”¹åƒæ•¸

ç·¨è¼¯ `CONFIG` å­—å…¸ï¼š

```python
CONFIG = {
    "STOP_LOSS": 0.05,  # æ”¹æˆ -5% åœæï¼ˆæ›´åš´æ ¼ï¼‰
    "FOREIGN_BUY_RATIO": 0.10,  # æ”¹æˆ 10%ï¼ˆè¦æ±‚æ›´å¼·æ³•äººè²·ç›¤ï¼‰
    # ... å…¶ä»–åƒæ•¸
}
```

ä¿®æ”¹å¾Œï¼š
```bash
git add stock_hunter_v2.py
git commit -m "Update config"
git push
```

Zeabur æœƒè‡ªå‹•é‡æ–°éƒ¨ç½²ã€‚

---

## ğŸ’¾ æŸ¥çœ‹å¾©ç›¤è¨˜éŒ„

### åœ¨ Zeabur æŸ¥çœ‹æª”æ¡ˆ

1. ç™»å…¥ Zeabur
2. é€²å…¥å°ˆæ¡ˆ
3. é»ã€ŒLogsã€â†’ã€ŒFilesã€
4. æ‰¾åˆ° `records/` è³‡æ–™å¤¾
5. ä¸‹è¼‰ JSON æª”æ¡ˆ

### æœ¬åœ°å¾©ç›¤å·¥å…·ï¼ˆæœªä¾†é–‹ç™¼ï¼‰

å¯ä»¥å¯«ä¸€å€‹å°å·¥å…·è®€å– JSON æª”æ¡ˆï¼Œç”Ÿæˆé€±å ±ï¼š

```python
import json
import glob

def generate_weekly_report():
    files = glob.glob("records/*.json")
    # ... åˆ†æé‚è¼¯
    print("æœ¬é€±å‹ç‡ï¼š65%")
```

---

## ğŸ› å¸¸è¦‹å•é¡Œ

### Q1: Zeabur é¡¯ç¤ºã€ŒBuild Failedã€ï¼Ÿ

æª¢æŸ¥ï¼š
1. `requirements_v2.txt` æª”æ¡ˆæ˜¯å¦æ­£ç¢º
2. å¥—ä»¶ç‰ˆæœ¬æ˜¯å¦ç›¸å®¹
3. æŸ¥çœ‹ Zeabur çš„ Build Logs

### Q2: LINE BOT æ²’æœ‰å›æ‡‰ï¼Ÿ

æª¢æŸ¥ï¼š
1. Webhook URL æ˜¯å¦æ­£ç¢ºï¼ˆè¦åŠ  `/callback`ï¼‰
2. ç’°å¢ƒè®Šæ•¸æ˜¯å¦è¨­å®šæ­£ç¢º
3. LINE Channel æ˜¯å¦å•Ÿç”¨ã€ŒUse webhookã€
4. æ˜¯å¦é—œé–‰ã€ŒAuto-reply messagesã€

### Q3: æ¨é€è¨Šæ¯å¤ªé•·è¢«æˆªæ–·ï¼Ÿ

LINE å–®å‰‡è¨Šæ¯é™åˆ¶ 5000 å­—å…ƒï¼Œå¦‚æœæ¨è–¦è‚¡ç¥¨å¤ªå¤šæœƒè¢«æˆªæ–·ã€‚

è§£æ±ºæ–¹æ³•ï¼š
```python
# åœ¨ format_line_message() ä¸­é™åˆ¶æ¨è–¦æ•¸é‡
buy_list = buy_list[:5]  # æœ€å¤š 5 æ”¯
short_list = short_list[:3]  # æœ€å¤š 3 æ”¯
```

### Q4: Gemini API é…é¡ç”¨å®Œï¼Ÿ

å…è²»ç‰ˆ Gemini API é™åˆ¶ï¼š
- 1500 æ¬¡/å¤©
- 60 æ¬¡/åˆ†é˜

å¦‚æœè¶…éï¼Œå¯ä»¥ï¼š
1. æ¸›å°‘æ–°èåˆ†ææ•¸é‡
2. å‡ç´šåˆ°ä»˜è²»ç‰ˆ
3. æš«æ™‚é—œé–‰æ–°èæƒ…ç·’åŠŸèƒ½

---

## ğŸ“ˆ æ•ˆèƒ½å„ªåŒ–

### 1. æ¸›å°‘æƒæè‚¡ç¥¨æ•¸

```python
# åªæƒæå¸‚å€¼å‰ 300 å¤§
all_stocks = all_stocks[:300]
```

### 2. å¿«å–æ©Ÿåˆ¶

```python
import pickle
from datetime import date

# å¿«å–ä»Šå¤©çš„è‚¡ç¥¨æ¸…å–®
cache_file = f"cache_{date.today()}.pkl"
if os.path.exists(cache_file):
    with open(cache_file, 'rb') as f:
        all_stocks = pickle.load(f)
else:
    all_stocks = get_taiwan_listed_stocks()
    with open(cache_file, 'wb') as f:
        pickle.dump(all_stocks, f)
```

---

## ğŸ¯ å¾©ç›¤èˆ‡èª¿æ•´æµç¨‹

### æ¯æ—¥å¾©ç›¤

1. **æ”¶åˆ°æ¨é€**ï¼ˆæ—©ä¸Š 8:00ï¼‰
2. **è¨˜éŒ„æ¨è–¦**ï¼ˆæˆªåœ–æˆ–ç­†è¨˜ï¼‰
3. **éš”æ—¥é©—è­‰**ï¼ˆçœ‹æ¼²è·Œï¼‰
4. **å•æˆ‘ï¼ˆClaudeï¼‰åˆ†æ**ï¼š
   ```
   "æ˜¨å¤©æ¨è–¦ 2330 å°ç©é›»ï¼Œä»Šå¤©æ¼² 2%ï¼Œç‚ºä»€éº¼ï¼Ÿ"
   "å¤–è³‡è²·è¶…é‚è¼¯æœ‰æ•ˆå—ï¼Ÿ"
   ```
5. **æˆ‘æœƒåˆ†æ**ï¼š
   - å“ªäº›é‚è¼¯æœ‰æ•ˆ
   - å“ªäº›åƒæ•¸éœ€è¦èª¿æ•´
   - ä¸‹æ¬¡å¦‚ä½•æ”¹é€²

### é€±å ±ç”Ÿæˆï¼ˆæœªä¾†é–‹ç™¼ï¼‰

æ¯é€±æ—¥è‡ªå‹•æ¨é€ï¼š
```
ğŸ“Š æœ¬é€±å¾©ç›¤ï¼ˆ12/02 - 12/08ï¼‰
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

æ¨è–¦è²·å…¥ï¼š15 ç­†
æˆåŠŸï¼š10 ç­†ï¼ˆ66.7%ï¼‰
å¤±æ•—ï¼š5 ç­†ï¼ˆ33.3%ï¼‰

ğŸ† æœ€ä½³æ¨è–¦
â€¢ 2330 å°ç©é›»ï¼š+5.2%
â€¢ 2454 è¯ç™¼ç§‘ï¼š+3.8%

âŒ å¤±æ•—æ¡ˆä¾‹
â€¢ 2603 é•·æ¦®ï¼š-2.1%
  â†’ åŸå› ï¼šæ³•äººè³£è¶…æŒçºŒ
  â†’ å»ºè­°ï¼šåŠ å¼·æ–°èæƒ…ç·’æ¬Šé‡

ğŸ’¡ èª¿æ•´å»ºè­°
â€¢ å¤–è³‡é€£çºŒè²·è¶…é‚è¼¯æœ‰æ•ˆï¼ˆ7/8 æˆåŠŸï¼‰
â€¢ å»ºè­°å°‡åœææ”¹ç‚º -5%ï¼ˆæ›´åš´æ ¼ï¼‰
```

---

## âœ… éƒ¨ç½²å®Œæˆæª¢æŸ¥æ¸…å–®

- [ ] LINE BOT å·²å»ºç«‹
- [ ] Gemini API Key å·²å–å¾—
- [ ] LINE USER ID å·²å–å¾—
- [ ] GitHub Repository å·²å»ºç«‹
- [ ] ç¨‹å¼ç¢¼å·²æ¨é€åˆ° GitHub
- [ ] Zeabur å°ˆæ¡ˆå·²å»ºç«‹
- [ ] ç’°å¢ƒè®Šæ•¸å·²è¨­å®š
- [ ] éƒ¨ç½²æˆåŠŸï¼ˆç‹€æ…‹ï¼šRunningï¼‰
- [ ] LINE Webhook å·²è¨­å®š
- [ ] æ‰‹å‹•æ¸¬è©¦æˆåŠŸï¼ˆ/manual_runï¼‰
- [ ] å°è©±æ¸¬è©¦æˆåŠŸï¼ˆä»Šæ—¥åˆ†æï¼‰
- [ ] ç­‰å¾…æ˜å¤©æ—©ä¸Š 8:00 è‡ªå‹•æ¨é€

---

## ğŸ“ éœ€è¦å¹«åŠ©ï¼Ÿ

æœ‰å•é¡Œéš¨æ™‚å•æˆ‘ï¼ˆClaudeï¼‰ï¼š
1. éƒ¨ç½²å•é¡Œ
2. åƒæ•¸èª¿æ•´å»ºè­°
3. å¾©ç›¤åˆ†æ
4. é‚è¼¯ä¿®æ­£

**ç¥ä½ è‚¡ç¥¨å¤§è³ºï¼** ğŸš€ğŸ’°
