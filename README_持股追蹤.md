# 持股追蹤系統使用說明

## 📁 檔案說明

### 1. `check_holdings.py` - 自動檢查腳本
每天晚上開電腦時執行，快速掌握所有持股狀況

### 2. `d:\_BRAIN\STOCK_STRATEGY.md` - 策略文檔
記錄選股邏輯、持股明細、歷史案例

---

## 🚀 使用流程

### 步驟 1：BOT 篩選股票
```bash
cd d:\claude-project\STOCK_HUNTER
python scan_v3.py
```

輸出檔案：`scan_result_v3.txt`

---

### 步驟 2：手動深入分析

**必做檢查**：
1. 查詢 3 個月新聞 (問 Claude)
2. 查法人累積買超:
   - 5 日累積 > 3,000 張 ✅
   - 1 月累積 > -10,000 張 ✅
3. 查主力是誰 (外資/投信)

**分析案例 (緯創)**：
```
問 Claude:
"3231 緯創，查 3 個月新聞，抓法人累積買超資料"

結果:
- 5 日累積: +18,478 張 ✅
- 主力: 投信 (較穩)
- 利多: GB300 訂單 2026 年翻倍
→ 決定買入
```

**排除案例 (神達)**：
```
問 Claude:
"3706 神達，查法人累積買超"

結果:
- 5 日累積: -23 張
- 1 月累積: -28,451 張 ❌
- 1 年累積: -226,222 張 ❌
→ 不買 (長期賣壓)
```

---

### 步驟 3：決定買入後更新持股清單

編輯 `check_holdings.py` 第 22-30 行:

```python
HOLDINGS = [
    {
        'ticker': '3231',
        'name': '緯創',
        'entry_price': 151.0,    # 你的進場價
        'stop_loss': 145.0,       # 停損價 (MA20 或 -5%)
        'targets': [157.0, 166.0, 181.0],  # 停利目標 (+4%, +10%, +20%)
        'shares': 10  # 買幾張 (自己填)
    },
    # 如果有第二檔，繼續加入
    {
        'ticker': '2330',
        'name': '台積電',
        'entry_price': 500.0,
        'stop_loss': 480.0,
        'targets': [520.0, 550.0, 600.0],
        'shares': 5
    }
]
```

同時更新 `d:\_BRAIN\STOCK_STRATEGY.md` 的「持股追蹤」表格。

---

### 步驟 4：每天檢查 (晚上開電腦時)

```bash
cd d:\claude-project\STOCK_HUNTER
python check_holdings.py
```

**輸出範例**：
```
====================================================================================================
持股每日檢查報告
====================================================================================================
檢查時間: 2025-12-31 23:45:00

【3231 緯創】
----------------------------------------------------------------------------------------------------
   抓取最新股價...
   抓取法人資料...

   最新股價: 157.0 元 (+3.97%)
   目前損益: +3.97% (+6.0 元)
   距停損: 7.6% (145.0 元)
   法人 5 日: +12,500 張 | 今日: +3,200 張

   [!] 重要訊號:
      [OK] 已達目標 1 (157.0元)，可賣 1/3

====================================================================================================
檢查完成

操作提醒:
   - 停損訊號 -> 立即賣出
   - 停利訊號 -> 分批賣出 (1/3)
   - 法人轉負 -> 考慮提早出場
====================================================================================================
```

---

## 🚨 重要訊號說明

### 停損訊號
```
[!!!] 已觸及停損! 立即賣出
```
**動作**: 隔天開盤立即賣出全部

---

### 接近停損
```
[!] 接近停損 (剩 1.4%)
```
**動作**: 密切關注，考慮提早出場

---

### 停利訊號
```
[OK] 已達目標 1 (157元)，可賣 1/3
[OK] 已達目標 2 (166元)，可賣 1/3
[OK] 已達目標 3 (181元)，可賣 1/3
```
**動作**: 分批賣出，鎖定利潤

---

### 法人訊號
```
[!] 法人 5 日累積轉負 (-4,500 張)
[!] 法人今日大賣 (-2,300 張)
```
**動作**: 考慮提早出場，即使未達停利

---

## 📊 持股記錄

**建議在 `d:\_BRAIN\STOCK_STRATEGY.md` 手動記錄**：

```markdown
### 3231 緯創

**每日記錄**:
| 日期 | 收盤 | 漲跌% | 法人 | 5日累積 | 備註 |
|:---|---:|---:|---:|---:|:---|
| 01/01 | 151 | +0.68% | +4,254 | +18,478 | 進場 10 張 |
| 01/02 | 153 | +1.32% | +2,100 | +17,500 | 持有 |
| 01/03 | 157 | +2.61% | +3,800 | +20,000 | 賣 3 張 (達目標 1) |
| 01/04 | 154 | -1.91% | -1,200 | +15,000 | 持有 7 張 |
```

---

## 🛠️ 常見問題

### Q1: 今天忘記檢查怎麼辦？
**A**: 沒關係，腳本會抓最新資料，任何時候執行都能看到當前狀況。

---

### Q2: 出差好幾天無法檢查？
**A**:
1. 買入前設好「移動停損單」(券商功能)
2. 或者乾脆不買，等回來再說

**重要**: 小波段操作需要適度關注，如果無法做到，就不要進場。

---

### Q3: 腳本顯示「無法取得資料」？
**A**: 可能原因:
- 非交易日 (週末、國定假日)
- API 暫時故障 (過幾分鐘再試)
- 股票代碼輸入錯誤

---

### Q4: 法人累積數字跟 BOT 不一樣？
**A**: 正常，因為:
- BOT 執行時間 ≠ check_holdings.py 執行時間
- 資料來源更新時間不同

---

### Q5: 我想改停損價怎麼辦？
**A**: 編輯 `check_holdings.py` 的 `HOLDINGS` 區塊，修改 `stop_loss` 數值。

---

## 📝 操作原則提醒

### 南亞科教訓
- 187.5 買入 = 法人剛進場 ✅
- 200 沒跑 = 已經變追高 ❌
- **教訓**: 抓到起漲點後，要設「到價賣出」不要貪

### 分批賣出紀律
- +4% → 賣 1/3 (鎖定本金)
- +10% → 賣 1/3 (鎖定利潤)
- +20% → 全出 (達標出場)

### 法人轉向警覺
- 5 日累積轉負 > 3,000 張 → 提早出
- 不要跟主力對賭

---

最後更新: 2026-01-01
